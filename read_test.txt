 ~ mongodb
9

  * postgres select with limit
                                                                         QUERY PLAN                                                                          
-------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.42..786.02 rows=10000 width=58) (actual time=0.017..1.572 rows=10000 loops=1)
   ->  Index Scan Backward using data_objects_pkey on data_objects  (cost=0.42..15712.33 rows=200000 width=58) (actual time=0.016..0.975 rows=10000 loops=1)
 Planning Time: 0.190 ms
 Execution Time: 1.879 ms
(4 rows)

  * postgres sum value with limit
                                                                    QUERY PLAN                                                                    
--------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=5262.88..5262.89 rows=1 width=8) (actual time=14.353..15.869 rows=1 loops=1)
   ->  Finalize Aggregate  (cost=5262.88..5262.89 rows=1 width=8) (actual time=14.352..15.867 rows=1 loops=1)
         ->  Gather  (cost=5262.67..5262.88 rows=2 width=8) (actual time=14.259..15.864 rows=3 loops=1)
               Workers Planned: 2
               Workers Launched: 2
               ->  Partial Aggregate  (cost=4262.67..4262.68 rows=1 width=8) (actual time=11.464..11.464 rows=1 loops=3)
                     ->  Parallel Seq Scan on data_objects  (cost=0.00..4054.33 rows=83333 width=8) (actual time=0.030..6.360 rows=66667 loops=3)
 Planning Time: 0.261 ms
 Execution Time: 15.935 ms
(9 rows)

  * timescaledb compressed -> select with limit
                                                                          QUERY PLAN                                                                           
---------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=17872.14..17897.14 rows=10000 width=58) (actual time=19.904..22.204 rows=10000 loops=1)
   ->  Custom Scan (ChunkAppend) on data_objects  (cost=17872.14..18497.14 rows=250000 width=58) (actual time=19.903..21.621 rows=10000 loops=1)
         Order: data_objects.start_time DESC
         ->  Sort  (cost=17872.14..18497.14 rows=250000 width=58) (actual time=19.902..20.774 rows=10000 loops=1)
               Sort Key: _hyper_13_184_chunk.start_time DESC
               Sort Method: external merge  Disk: 5176kB
               ->  Custom Scan (DecompressChunk) on _hyper_13_184_chunk  (cost=0.05..12.50 rows=250000 width=58) (actual time=0.077..6.908 rows=71072 loops=1)
                     ->  Seq Scan on compress_hyper_14_199_chunk  (cost=0.00..12.50 rows=250 width=284) (actual time=0.004..0.016 rows=72 loops=1)
         ->  Sort  (cost=17872.14..18497.14 rows=250000 width=58) (never executed)
               Sort Key: _hyper_13_183_chunk.start_time DESC
               ->  Custom Scan (DecompressChunk) on _hyper_13_183_chunk  (cost=0.05..12.50 rows=250000 width=58) (never executed)
                     ->  Seq Scan on compress_hyper_14_198_chunk  (cost=0.00..12.50 rows=250 width=284) (never executed)
         ->  Sort  (cost=17872.14..18497.14 rows=250000 width=58) (never executed)
               Sort Key: _hyper_13_182_chunk.start_time DESC
               ->  Custom Scan (DecompressChunk) on _hyper_13_182_chunk  (cost=0.05..12.50 rows=250000 width=58) (never executed)
                     ->  Seq Scan on compress_hyper_14_197_chunk  (cost=0.00..12.50 rows=250 width=284) (never executed)
 Planning Time: 1.883 ms
 Execution Time: 23.058 ms
(18 rows)

  * timescale compressed -> sum value with limit
                                                                             QUERY PLAN                                                                             
--------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=1912.55..1912.56 rows=1 width=8) (actual time=17.958..17.960 rows=1 loops=1)
   ->  Finalize Aggregate  (cost=1912.55..1912.56 rows=1 width=8) (actual time=17.957..17.959 rows=1 loops=1)
         ->  Append  (cost=637.50..1912.55 rows=3 width=8) (actual time=2.940..17.957 rows=3 loops=1)
               ->  Partial Aggregate  (cost=637.50..637.51 rows=1 width=8) (actual time=2.940..2.941 rows=1 loops=1)
                     ->  Custom Scan (DecompressChunk) on _hyper_13_182_chunk  (cost=0.05..12.50 rows=250000 width=8) (actual time=0.070..1.611 rows=32928 loops=1)
                           ->  Seq Scan on compress_hyper_14_197_chunk  (cost=0.00..12.50 rows=250 width=36) (actual time=0.005..0.007 rows=33 loops=1)
               ->  Partial Aggregate  (cost=637.50..637.51 rows=1 width=8) (actual time=8.638..8.639 rows=1 loops=1)
                     ->  Custom Scan (DecompressChunk) on _hyper_13_183_chunk  (cost=0.05..12.50 rows=250000 width=8) (actual time=0.045..4.514 rows=96000 loops=1)
                           ->  Seq Scan on compress_hyper_14_198_chunk  (cost=0.00..12.50 rows=250 width=36) (actual time=0.006..0.018 rows=96 loops=1)
               ->  Partial Aggregate  (cost=637.50..637.51 rows=1 width=8) (actual time=6.376..6.376 rows=1 loops=1)
                     ->  Custom Scan (DecompressChunk) on _hyper_13_184_chunk  (cost=0.05..12.50 rows=250000 width=8) (actual time=0.066..3.480 rows=71072 loops=1)
                           ->  Seq Scan on compress_hyper_14_199_chunk  (cost=0.00..12.50 rows=250 width=36) (actual time=0.005..0.013 rows=72 loops=1)
 Planning Time: 1.558 ms
 Execution Time: 18.037 ms
(14 rows)

  * timescale decompressed -> select with limit
                                                                                         QUERY PLAN                                                                                          
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=0.29..283.37 rows=10000 width=58) (actual time=0.022..2.777 rows=10000 loops=1)
   ->  Custom Scan (ChunkAppend) on data_objects  (cost=0.29..2299.33 rows=81216 width=58) (actual time=0.021..2.183 rows=10000 loops=1)
         Order: data_objects.start_time DESC
         ->  Index Scan using _hyper_13_184_chunk_data_objects_start_time_idx on _hyper_13_184_chunk  (cost=0.29..2299.33 rows=81216 width=58) (actual time=0.020..1.306 rows=10000 loops=1)
         ->  Index Scan using _hyper_13_183_chunk_data_objects_start_time_idx on _hyper_13_183_chunk  (cost=0.29..2991.09 rows=105280 width=58) (never executed)
         ->  Index Scan using _hyper_13_182_chunk_data_objects_start_time_idx on _hyper_13_182_chunk  (cost=0.29..1104.15 rows=39104 width=58) (never executed)
 Planning Time: 1.195 ms
 Execution Time: 3.128 ms
(8 rows)

  * timescale decompressed -> sum value with limit
                                                                          QUERY PLAN                                                                           
---------------------------------------------------------------------------------------------------------------------------------------------------------------
 Limit  (cost=5059.48..5059.49 rows=1 width=8) (actual time=13.976..16.061 rows=1 loops=1)
   ->  Finalize Aggregate  (cost=5059.48..5059.49 rows=1 width=8) (actual time=13.975..16.059 rows=1 loops=1)
         ->  Gather  (cost=2461.18..5059.47 rows=6 width=8) (actual time=5.844..16.055 rows=6 loops=1)
               Workers Planned: 2
               Workers Launched: 2
               ->  Parallel Append  (cost=1461.18..4058.87 rows=3 width=8) (actual time=8.170..11.973 rows=2 loops=3)
                     ->  Partial Aggregate  (cost=1894.12..1894.13 rows=1 width=8) (actual time=5.970..5.970 rows=1 loops=3)
                           ->  Parallel Seq Scan on _hyper_13_183_chunk  (cost=0.00..1739.29 rows=61929 width=8) (actual time=0.010..4.640 rows=32000 loops=3)
                     ->  Partial Aggregate  (cost=1461.18..1461.19 rows=1 width=8) (actual time=6.175..6.176 rows=1 loops=2)
                           ->  Parallel Seq Scan on _hyper_13_184_chunk  (cost=0.00..1341.74 rows=47774 width=8) (actual time=0.008..4.690 rows=35536 loops=2)
                     ->  Partial Aggregate  (cost=703.53..703.54 rows=1 width=8) (actual time=5.647..5.647 rows=1 loops=1)
                           ->  Parallel Seq Scan on _hyper_13_182_chunk  (cost=0.00..646.02 rows=23002 width=8) (actual time=0.019..4.280 rows=32928 loops=1)
 Planning Time: 1.067 ms
 Execution Time: 16.121 ms
(14 rows)

